{"version":3,"sources":["../src/generatorRepository.js"],"names":["GeneratorRepository","GenerateApp","appJson","callback","rootPath","process","cwd","templatePath","path","resolve","sandboxPath","app_name","console","log","fse","copy","filter","copied","indexOf","then","catch","error"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;;;IAEMA,mB;;;SACFC,W,GAAc,UAACC,OAAD,EAAUC,QAAV,EAAuB;AACjC,YAAIC,WAAWC,QAAQC,GAAR,EAAf;AACA,YAAIC,eAAeC,eAAKC,OAAL,CAAaL,QAAb,EAAuB,IAAvB,EAA6B,oBAA7B,CAAnB;AACA,YAAIM,cAAcF,eAAKC,OAAL,CAAaL,QAAb,YAA+BF,QAAQS,QAAvC,cAAlB;AACAC,gBAAQC,GAAR,gBAAyBT,QAAzB;AACAQ,gBAAQC,GAAR,oBAA6BN,YAA7B,uBAA2DG,WAA3D;AACAI,0BAAIC,IAAJ,CAASR,YAAT,EAAuBG,WAAvB,EAAoC;AAChCM,oBAAQ,gBAACR,IAAD,EAAU;AACd,oBAAIS,SAAST,KAAKU,OAAL,CAAa,cAAb,IAA+B,CAA/B,IACMV,KAAKU,OAAL,CAAa,KAAb,IAAsB,CAD5B,IAEMV,KAAKU,OAAL,CAAa,KAAb,IAAsB,CAF5B,IAGMV,KAAKU,OAAL,CAAa,KAAb,IAAsB,CAHzC;AAIAN,wBAAQC,GAAR,CAAYI,SAAS,QAAT,GAAoB,SAAhC,EAA2CT,IAA3C;AACA,uBAAOS,MAAP;AACH;AAR+B,SAApC,EAUCE,IAVD,CAUM,YAAM;AACRP,oBAAQC,GAAR,sCAA+CH,WAA/C;AACAP,qBAAS,IAAT,EAAeI,YAAf,EAA6BG,WAA7B;AACH,SAbD,EAcCU,KAdD,CAcO,UAACC,KAAD,EAAW;AACdT,oBAAQS,KAAR,mCAA8Cd,YAA9C,oBAAyEG,WAAzE;AACAP,qBAASkB,KAAT,EAAgBd,YAAhB,EAA8BG,WAA9B;AACH,SAjBD;AAmBH,K;;;kBAGU,IAAIV,mBAAJ,E","file":"generatorRepository.js","sourcesContent":["import fse from 'fs-extra';\r\nimport path from 'path';\r\n\r\nclass GeneratorRepository{\r\n    GenerateApp = (appJson, callback) => {\r\n        var rootPath = process.cwd();\r\n        var templatePath = path.resolve(rootPath, '..', 'templates/core/web');\r\n        var sandboxPath = path.resolve(rootPath, `apps/${appJson.app_name}/sandbox`);\r\n        console.log(`rootpath: ${rootPath}`);\r\n        console.log(`templatePath: ${templatePath}, sandboxPath: ${sandboxPath}`);\r\n        fse.copy(templatePath, sandboxPath, {\r\n            filter: (path) => {\r\n                let copied = path.indexOf('node_modules') < 0\r\n                                && path.indexOf('bin') < 0\r\n                                && path.indexOf('obj') < 0\r\n                                && path.indexOf('.vs') < 0;\r\n                console.log(copied ? 'copied' : 'skipped', path);\r\n                return copied;\r\n            }\r\n        })\r\n        .then(() => {\r\n            console.log(`Template successfully copied at ${sandboxPath}`);  \r\n            callback(null, templatePath, sandboxPath);\r\n        })\r\n        .catch((error) => {\r\n            console.error(`error while copying template ${templatePath} to sandbox ${sandboxPath}`)\r\n            callback(error, templatePath, sandboxPath);\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport default new GeneratorRepository();"]}